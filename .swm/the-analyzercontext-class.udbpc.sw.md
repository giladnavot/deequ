---
title: The AnalyzerContext class
---
This document will cover the class <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="29:4:4" line-data="case class AnalyzerContext(metricMap: Map[Analyzer[_, Metric[_]], Metric[_]]) {">`AnalyzerContext`</SwmToken> in detail. We will explain:

1. What <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="29:4:4" line-data="case class AnalyzerContext(metricMap: Map[Analyzer[_, Metric[_]], Metric[_]]) {">`AnalyzerContext`</SwmToken> is.
2. The variables and functions defined in <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="29:4:4" line-data="case class AnalyzerContext(metricMap: Map[Analyzer[_, Metric[_]], Metric[_]]) {">`AnalyzerContext`</SwmToken>.

# What is <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="29:4:4" line-data="case class AnalyzerContext(metricMap: Map[Analyzer[_, Metric[_]], Metric[_]]) {">`AnalyzerContext`</SwmToken>

The <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="29:4:4" line-data="case class AnalyzerContext(metricMap: Map[Analyzer[_, Metric[_]], Metric[_]]) {">`AnalyzerContext`</SwmToken> class is defined in <SwmPath>[src/â€¦/runners/AnalyzerContext.scala](src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala)</SwmPath>. It is used to store the results of analyzers in the form of metrics. This class is essential for managing and retrieving the metrics generated by various analyzers during data quality checks.

<SwmSnippet path="/src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" line="29">

---

The variable <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="29:6:6" line-data="case class AnalyzerContext(metricMap: Map[Analyzer[_, Metric[_]], Metric[_]]) {">`metricMap`</SwmToken> is a map that stores analyzers and their corresponding metric results. It is defined as <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="29:9:27" line-data="case class AnalyzerContext(metricMap: Map[Analyzer[_, Metric[_]], Metric[_]]) {">`Map[Analyzer[_, Metric[_]], Metric[_]]`</SwmToken>.

```scala
case class AnalyzerContext(metricMap: Map[Analyzer[_, Metric[_]], Metric[_]]) {
```

---

</SwmSnippet>

<SwmSnippet path="/src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" line="31">

---

The function <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="31:3:3" line-data="  def allMetrics: Seq[Metric[_]] = {">`allMetrics`</SwmToken> returns all the metrics stored in the <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="32:1:1" line-data="    metricMap.values.toSeq">`metricMap`</SwmToken> as a sequence. It is defined as follows:

```scala
  def allMetrics: Seq[Metric[_]] = {
    metricMap.values.toSeq
  }
```

---

</SwmSnippet>

<SwmSnippet path="/src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" line="35">

---

The function `++` merges the current <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="35:8:8" line-data="  def ++(other: AnalyzerContext): AnalyzerContext = {">`AnalyzerContext`</SwmToken> with another <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="35:8:8" line-data="  def ++(other: AnalyzerContext): AnalyzerContext = {">`AnalyzerContext`</SwmToken>, combining their <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="36:3:3" line-data="    AnalyzerContext(metricMap ++ other.metricMap)">`metricMap`</SwmToken>s. It is defined as follows:

```scala
  def ++(other: AnalyzerContext): AnalyzerContext = {
    AnalyzerContext(metricMap ++ other.metricMap)
  }
```

---

</SwmSnippet>

<SwmSnippet path="/src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" line="39">

---

The function <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="39:3:3" line-data="  def metric(analyzer: Analyzer[_, Metric[_]]): Option[Metric[_]] = {">`metric`</SwmToken> retrieves the metric for a given analyzer from the <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="40:1:1" line-data="    metricMap.get(analyzer)">`metricMap`</SwmToken>. It returns an <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="39:21:27" line-data="  def metric(analyzer: Analyzer[_, Metric[_]]): Option[Metric[_]] = {">`Option[Metric[_]]`</SwmToken>. It is defined as follows:

```scala
  def metric(analyzer: Analyzer[_, Metric[_]]): Option[Metric[_]] = {
    metricMap.get(analyzer)
  }
```

---

</SwmSnippet>

<SwmSnippet path="/src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" line="46">

---

The function <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="46:3:3" line-data="  def empty: AnalyzerContext = AnalyzerContext(Map.empty)">`empty`</SwmToken> creates an empty <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="46:6:6" line-data="  def empty: AnalyzerContext = AnalyzerContext(Map.empty)">`AnalyzerContext`</SwmToken> with an empty <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="29:6:6" line-data="case class AnalyzerContext(metricMap: Map[Analyzer[_, Metric[_]], Metric[_]]) {">`metricMap`</SwmToken>. It is defined as follows:

```scala
  def empty: AnalyzerContext = AnalyzerContext(Map.empty)
```

---

</SwmSnippet>

<SwmSnippet path="/src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" line="48">

---

The function <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="48:3:3" line-data="  def successMetricsAsDataFrame(">`successMetricsAsDataFrame`</SwmToken> converts the successful metrics in the <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="50:4:4" line-data="      analyzerContext: AnalyzerContext,">`AnalyzerContext`</SwmToken> to a <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="52:3:3" line-data="    : DataFrame = {">`DataFrame`</SwmToken>. It takes a <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="49:4:4" line-data="      sparkSession: SparkSession,">`SparkSession`</SwmToken>, an <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="50:4:4" line-data="      analyzerContext: AnalyzerContext,">`AnalyzerContext`</SwmToken>, and an optional sequence of analyzers as parameters. It is defined as follows:

```scala
  def successMetricsAsDataFrame(
      sparkSession: SparkSession,
      analyzerContext: AnalyzerContext,
      forAnalyzers: Seq[Analyzer[_, Metric[_]]] = Seq.empty)
    : DataFrame = {

    val metricsList = getSimplifiedMetricOutputForSelectedAnalyzers(analyzerContext, forAnalyzers)

    import sparkSession.implicits._

    metricsList.toDF("entity", "instance", "name", "value")
  }
```

---

</SwmSnippet>

<SwmSnippet path="/src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" line="61">

---

The function <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="61:3:3" line-data="  def successMetricsAsJson(analyzerContext: AnalyzerContext,">`successMetricsAsJson`</SwmToken> converts the successful metrics in the <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="61:8:8" line-data="  def successMetricsAsJson(analyzerContext: AnalyzerContext,">`AnalyzerContext`</SwmToken> to a JSON string. It takes an <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="61:8:8" line-data="  def successMetricsAsJson(analyzerContext: AnalyzerContext,">`AnalyzerContext`</SwmToken> and an optional sequence of analyzers as parameters. It is defined as follows:

```scala
  def successMetricsAsJson(analyzerContext: AnalyzerContext,
    forAnalyzers: Seq[Analyzer[_, Metric[_]]] = Seq.empty): String = {

    val metricsList = getSimplifiedMetricOutputForSelectedAnalyzers(analyzerContext, forAnalyzers)

    val result = metricsList.map { simplifiedMetricOutput =>
      Map(
        "entity" -> simplifiedMetricOutput.entity,
        "instance" -> simplifiedMetricOutput.instance,
        "name" -> simplifiedMetricOutput.name,
        "value" -> simplifiedMetricOutput.value
      )
    }

    SimpleResultSerde.serialize(result)
  }
```

---

</SwmSnippet>

<SwmSnippet path="/src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" line="78">

---

The private function <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="78:8:8" line-data="  private[this] def getSimplifiedMetricOutputForSelectedAnalyzers(">`getSimplifiedMetricOutputForSelectedAnalyzers`</SwmToken> filters and simplifies the metrics for the selected analyzers. It is used internally by <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="48:3:3" line-data="  def successMetricsAsDataFrame(">`successMetricsAsDataFrame`</SwmToken> and <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="61:3:3" line-data="  def successMetricsAsJson(analyzerContext: AnalyzerContext,">`successMetricsAsJson`</SwmToken>. It is defined as follows:

```scala
  private[this] def getSimplifiedMetricOutputForSelectedAnalyzers(
      analyzerContext: AnalyzerContext,
      forAnalyzers: Seq[Analyzer[_, Metric[_]]])
    : Seq[SimpleMetricOutput] = {

    analyzerContext.metricMap
      // Get matching analyzers
      .filterKeys(analyzer => forAnalyzers.isEmpty || forAnalyzers.contains(analyzer))
      // Get analyzers with successful results
      .filter { case (_, metrics) => metrics.value.isSuccess }
      // Get metrics as Double and replace simple name with description
      .flatMap { case (analyzer, metrics) =>
        metrics.flatten().map { metric =>
          val description = describeMetric(analyzer, metric)
          renameMetric(metric, description)
        }
      }
      // Simplify metrics
      .map(SimpleMetricOutput(_))
      .toSeq
  }
```

---

</SwmSnippet>

<SwmSnippet path="/src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" line="100">

---

The private function <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="100:8:8" line-data="  private[this] def renameMetric(metric: DoubleMetric, newName: String): DoubleMetric = {">`renameMetric`</SwmToken> renames a metric with a new name. It is used internally by <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="54:7:7" line-data="    val metricsList = getSimplifiedMetricOutputForSelectedAnalyzers(analyzerContext, forAnalyzers)">`getSimplifiedMetricOutputForSelectedAnalyzers`</SwmToken>. It is defined as follows:

```scala
  private[this] def renameMetric(metric: DoubleMetric, newName: String): DoubleMetric = {
    metric.copy(name = newName)
  }
```

---

</SwmSnippet>

<SwmSnippet path="/src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" line="113">

---

The private function <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="113:8:8" line-data="  private[this] def describeMetric(analyzer: Any, metric: DoubleMetric): String = {">`describeMetric`</SwmToken> provides a description for a metric, including the name of the metric and any filtering conditions applied by the analyzer. It is used internally by <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="54:7:7" line-data="    val metricsList = getSimplifiedMetricOutputForSelectedAnalyzers(analyzerContext, forAnalyzers)">`getSimplifiedMetricOutputForSelectedAnalyzers`</SwmToken>. It is defined as follows:

```scala
  private[this] def describeMetric(analyzer: Any, metric: DoubleMetric): String = {
    val name = metric.name

    val filterCondition: Option[String] = analyzer match {
      case x : FilterableAnalyzer => x.filterCondition
      case _ => None
    }

    filterCondition match {
      case Some(x) => s"$name (where: $x)"
      case _ => name
    }
  }
```

---

</SwmSnippet>

<SwmSnippet path="/src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" line="127">

---

The private case class <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="127:10:10" line-data="  private[this] case class SimpleMetricOutput(">`SimpleMetricOutput`</SwmToken> is used to simplify the output of metrics. It is used internally by <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="54:7:7" line-data="    val metricsList = getSimplifiedMetricOutputForSelectedAnalyzers(analyzerContext, forAnalyzers)">`getSimplifiedMetricOutputForSelectedAnalyzers`</SwmToken>. It is defined as follows:

```scala
  private[this] case class SimpleMetricOutput(
    entity: String,
    instance: String,
    name: String,
    value: Double)

```

---

</SwmSnippet>

<SwmSnippet path="/src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" line="134">

---

The companion object for <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="135:12:12" line-data="    def apply(doubleMetric: DoubleMetric): SimpleMetricOutput = {">`SimpleMetricOutput`</SwmToken> provides an <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="135:3:3" line-data="    def apply(doubleMetric: DoubleMetric): SimpleMetricOutput = {">`apply`</SwmToken> method to create instances of <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="135:12:12" line-data="    def apply(doubleMetric: DoubleMetric): SimpleMetricOutput = {">`SimpleMetricOutput`</SwmToken> from <SwmToken path="src/main/scala/com/amazon/deequ/analyzers/runners/AnalyzerContext.scala" pos="135:8:8" line-data="    def apply(doubleMetric: DoubleMetric): SimpleMetricOutput = {">`DoubleMetric`</SwmToken> instances. It is defined as follows:

```scala

    def apply(doubleMetric: DoubleMetric): SimpleMetricOutput = {
      SimpleMetricOutput(
        doubleMetric.entity.toString,
        doubleMetric.instance,
        doubleMetric.name,
        doubleMetric.value.get
      )
    }
```

---

</SwmSnippet>

&nbsp;

*This is an auto-generated document by Swimm ðŸŒŠ and has not yet been verified by a human*

<SwmMeta version="3.0.0" repo-id="Z2l0aHViJTNBJTNBZGVlcXUlM0ElM0Fhd3NsYWJz" repo-name="deequ"><sup>Powered by [Swimm](/)</sup></SwmMeta>
